/************************************************************
 * Everforest Dark Hard for Zen Browser
 * Palette: https://theoryware.net/everforest/ (Hard Dark)
 * Target: Zen Browser (Firefox fork, userChrome.css)
 ************************************************************/

/* ========== 0. PALETTE VARIABLES (Everforest) ========== */

:root {
  /* Core Everforest colors (Hard Dark) */
  --ef-fg:        #d3c6aa;
  --ef-red:       #e67e80;
  --ef-orange:    #e69875;
  --ef-yellow:    #dbbc7f;
  --ef-green:     #a7c080;
  --ef-aqua:      #83c092;
  --ef-blue:      #7fbbb3;
  --ef-purple:    #d699b6;

  --ef-gray-0:    #7a8478;
  --ef-gray-1:    #859289;
  --ef-gray-2:    #9da9a0;

  --ef-bg0:       #2b3339;
  --ef-bg1:       #323c41;
  --ef-bg2:       #3a454a;
  --ef-bg3:       #445055;
  --ef-bg4:       #4c555b;
  --ef-bg5:       #53605c;

  --ef-bg-visual: #503946;
  --ef-bg-red:    #4e3e43;
  --ef-bg-green:  #404d44;
  --ef-bg-blue:   #394f5a;
  --ef-bg-yellow: #4a4940;

  /* Derived UI colors */
  --ef-border-soft: rgba(150, 160, 150, 0.35);
  --ef-border-strong: rgba(150, 160, 150, 0.7);
  --ef-highlight-soft: rgba(167, 192, 128, 0.15); /* green tint */
  --ef-shadow-soft: 0 0 0 1px rgba(0, 0, 0, 0.35),
                    0 10px 30px rgba(0, 0, 0, 0.45);
}

/************************************************************
 * 1. GLOBAL / WINDOW BACKGROUND
 ************************************************************/

/* Main browser background (Zen specific container) */
#zen-browser-background {
  background-color: var(--ef-bg0) !important;
}

/* If Zen gradient background is enabled, keep it subtle */
#zen-browser-background::after {
  background-color: var(--ef-bg1) !important;
}

/* Base browser window area */
browser[type="content-primary"],
browser[type="content"] {
  background-color: var(--ef-bg0) !important;
}

/************************************************************
 * 2. TOOLBAR + TITLEBAR + TABSTRIP
 ************************************************************/

/* Top bars (tabs toolbar, navbar, titlebar) */
#navigator-toolbox,
#titlebar,
#TabsToolbar,
#nav-bar,
#PersonalToolbar {
  background-color: var(--ef-bg0) !important;
  color: var(--ef-fg) !important;
  border: 0 !important;
}

/* Remove default noisy borders */
#navigator-toolbox::after,
#nav-bar::after {
  border: none !important;
}

/* Tab strip background */
#TabsToolbar {
  background-color: var(--ef-bg0) !important;
}

/************************************************************
 * 3. TABS
 ************************************************************/

/* Tab container background (behind tabs) */
.tabbrowser-arrowscrollbox {
  background-color: var(--ef-bg0) !important;
}

/* Default tab appearance */
.tabbrowser-tab {
  color: var(--ef-gray-2) !important;
  font-weight: 500;
}

/* Tab background shapes */
.tabbrowser-tab .tab-background {
  background-color: var(--ef-bg0) !important;
  border-radius: 8px !important;
  border: 1px solid transparent !important;
  margin-block: 3px !important;
}

/* Hovered tab */
.tabbrowser-tab:hover .tab-background {
  background-color: var(--ef-bg1) !important;
  border-color: var(--ef-border-soft) !important;
}

/* Selected/active tab */
.tabbrowser-tab[selected="true"] .tab-background {
  background-color: var(--ef-bg3) !important;
  border-color: var(--ef-green) !important;
  box-shadow: 0 0 0 1px rgba(167, 192, 128, 0.65) !important;
}

/* Selected tab text color */
.tabbrowser-tab[selected="true"] .tab-label {
  color: var(--ef-fg) !important;
}

/* Unselected tabs text */
.tabbrowser-tab:not([selected="true"]) .tab-label {
  color: var(--ef-gray-1) !important;
}

/* Mute / audio icons */
.tabbrowser-tab .tab-icon-overlay {
  fill: var(--ef-aqua) !important;
  opacity: 0.85 !important;
}

/* Close button on tabs */
.tabbrowser-tab .tab-close-button {
  fill: var(--ef-gray-2) !important;
  opacity: 0.75 !important;
}

.tabbrowser-tab .tab-close-button:hover {
  background-color: var(--ef-bg-red) !important;
  fill: var(--ef-red) !important;
  opacity: 1 !important;
}

/************************************************************
 * 4. URL BAR / SEARCH BAR
 ************************************************************/

/* URL bar container */
#urlbar,
.searchbar-textbox {
  background-color: var(--ef-bg1) !important;
  color: var(--ef-fg) !important;
  border-radius: 12px !important;
  border: 1px solid var(--ef-border-soft) !important;
  box-shadow: none !important;
}

/* URL bar inner text */
#urlbar-input,
#urlbar .urlbar-input-box,
.searchbar-textbox .textbox-input-box {
  color: var(--ef-fg) !important;
}

/* Placeholder */
#urlbar-input::placeholder,
.searchbar-textbox::placeholder {
  color: var(--ef-gray-1) !important;
}

/* URL bar on focus */
#urlbar[focused="true"],
.searchbar-textbox[focused="true"] {
  background-color: var(--ef-bg2) !important;
  border-color: var(--ef-green) !important;
  box-shadow: var(--ef-shadow-soft) !important;
}

/* URL bar results dropdown */
#urlbar-result-menu,
.urlbarView-results,
.urlbarView-body-inner {
  background-color: var(--ef-bg1) !important;
  color: var(--ef-fg) !important;
  border-radius: 10px !important;
  border: 1px solid var(--ef-border-soft) !important;
}

/* Result rows */
.urlbarView-row {
  padding-block: 4px !important;
  border-radius: 6px !important;
}

/* Highlight hovered / selected result */
.urlbarView-row:hover,
.urlbarView-row[aria-selected="true"] {
  background-color: var(--ef-bg-visual) !important;
}

/* Emphasis text in suggestions */
.urlbarView-title {
  color: var(--ef-fg) !important;
}

.urlbarView-url,
.urlbarView-action {
  color: var(--ef-aqua) !important;
}

/************************************************************
 * 5. TOOLBAR BUTTONS & ICONS
 ************************************************************/

toolbarbutton,
toolbarbutton > .toolbarbutton-icon,
toolbarbutton > .toolbarbutton-text {
  color: var(--ef-gray-2) !important;
  fill: var(--ef-gray-2) !important;
}

/* Buttons hover */
toolbarbutton:hover:not([disabled="true"]) {
  background-color: transparent !important;
}

toolbarbutton:hover:not([disabled="true"]) > .toolbarbutton-icon,
toolbarbutton:hover:not([disabled="true"]) > .toolbarbutton-text {
  background-color: var(--ef-bg2) !important;
  border-radius: 8px !important;
  color: var(--ef-fg) !important;
  fill: var(--ef-fg) !important;
}

/* Active / pressed buttons */
toolbarbutton[open="true"],
toolbarbutton[checked="true"] {
  background-color: var(--ef-bg3) !important;
  border-radius: 8px !important;
  box-shadow: 0 0 0 1px var(--ef-border-soft) !important;
}

/************************************************************
 * 6. SIDEBAR (Zen sidebar, bookmarks, etc.)
 ************************************************************/

/* Sidebar container */
#sidebar-box,
#sidebar-box #sidebar,
#zen-sidebar,
#zen-sidebar-container {
  background-color: var(--ef-bg0) !important;
  color: var(--ef-fg) !important;
  border-right: 1px solid var(--ef-border-soft) !important;
}

/* Sidebar headers / titles */
#sidebar-header,
#zen-sidebar-header {
  background-color: var(--ef-bg1) !important;
  color: var(--ef-fg) !important;
  border-bottom: 1px solid var(--ef-border-soft) !important;
}

/* Sidebar tree (bookmarks/history) */
#bookmarks-view treechildren::-moz-tree-row,
#historyTree treechildren::-moz-tree-row {
  background-color: var(--ef-bg0) !important;
}

#bookmarks-view treechildren::-moz-tree-row(selected),
#bookmarks-view treechildren::-moz-tree-row(current, focus),
#historyTree treechildren::-moz-tree-row(selected),
#historyTree treechildren::-moz-tree-row(current, focus) {
  background-color: var(--ef-bg-visual) !important;
}

#bookmarks-view treechildren::-moz-tree-cell-text,
#historyTree treechildren::-moz-tree-cell-text {
  color: var(--ef-gray-2) !important;
}

#bookmarks-view treechildren::-moz-tree-cell-text(selected),
#bookmarks-view treechildren::-moz-tree-cell-text(current, focus),
#historyTree treechildren::-moz-tree-cell-text(selected),
#historyTree treechildren::-moz-tree-cell-text(current, focus) {
  color: var(--ef-fg) !important;
}

/************************************************************
 * 7. CONTEXT MENUS / POPUPS
 ************************************************************/

menupopup,
panel,
#appMenu-popup {
  -moz-appearance: none !important;
  background-color: var(--ef-bg1) !important;
  color: var(--ef-fg) !important;
  border: 1px solid var(--ef-border-soft) !important;
  border-radius: 8px !important;
}

/* Menu items */
menuitem,
menu {
  -moz-appearance: none !important;
  color: var(--ef-fg) !important;
}

/* Hover / selection */
menuitem[_moz-menuactive="true"],
menu[_moz-menuactive="true"] {
  background-color: var(--ef-bg-visual) !important;
  color: var(--ef-fg) !important;
}

/* Separators */
menuseparator {
  -moz-appearance: none !important;
  border-top: 1px solid var(--ef-border-soft) !important;
  margin-block: 4px !important;
}

/************************************************************
 * 8. SCROLLBARS (GLOBAL)
 ************************************************************/

:root {
  scrollbar-width: thin;
  scrollbar-color: var(--ef-gray-1) var(--ef-bg1);
}

/* For some places that still use old-style scrollbars */
scrollbar,
scrollbar thumb,
scrollbar scrollbarbutton {
  -moz-appearance: none !important;
}

scrollbar {
  background-color: var(--ef-bg1) !important;
}

scrollbar thumb {
  background-color: var(--ef-gray-1) !important;
  border-radius: 999px !important;
}

scrollbar thumb:hover {
  background-color: var(--ef-gray-2) !important;
}

/************************************************************
 * 9. MISC CLEANUPS
 ************************************************************/

/* Remove ugly top border under the tabstrip */
#navigator-toolbox::after {
  border-bottom: none !important;
}

/* Remove flexible space background artifacts */
toolbarspring {
  max-width: 40px !important;
}

/* Slightly tighter toolbar height */
#nav-bar {
  padding-block: 2px !important;
}

/* Donâ€™t let native themes override us */
:root:-moz-lwtheme {
  background-color: var(--ef-bg0) !important;
  color: var(--ef-fg) !important;
}
